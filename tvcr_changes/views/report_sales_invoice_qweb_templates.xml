<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Bayer SA-->
        <template id="report_invoice_document_fecr_plantilla_3" name="Bayer S.A">
            <t t-call="cr_electronic_invoice_qweb_fe.external_layout_fecr_invoice">
                <div class="page" style="height:160mm;width:100%">
                    <t t-set="lines" t-value="o.group_lines_by_sale_order()"/>
                    <t t-set="lines_count" t-value="len(lines)"/>
                    <t t-set="page_height" t-value="160"/> <!-- Altura máxima en mm para el contenido -->
                    <t t-set="line_height" t-value="11"/>  <!-- Altura estimada de cada línea en mm -->
                    <!--t t-set="lines_per_page" t-value="int(page_height / line_height)"/-->
                    <t t-set="lines_per_page" t-value="15"/>

                    <div class="content">
                        <t t-foreach="range(0, lines_count, lines_per_page)" t-as="page_index">
                            <t t-if="page_index > 0"><br/></t>
                            <div class="cuadro-detalle" style="height:160mm;">
                                <div class="encabezado">Detalle</div>
                                <div class="contenido">
                                    <table class="ttable">
                                        <thead>
                                            <tr>
                                                <th class="tthl">Descripción</th>
                                                <th width="15%" class="tth">Monto Bruto</th>
                                                <th width="15%" class="tth">Descuento</th>
                                                <th width="15%" class="tth">Monto Neto</th>
                                                <th width="10%" class="tth">Impuestos</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <t t-foreach="lines[page_index:page_index + lines_per_page]" t-as="l">
                                                <tr class="ttd">
                                                    <td class="ttdl">
                                                        <span t-esc="l['descripcion']"/>
                                                    </td>
                                                    <td class="ttd">
                                                        <span t-esc="l['bruto']" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                                    </td>
                                                    <td class="ttd" groups="product.group_discount_per_so_line">
                                                        <span t-esc="l['descuento']" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                                    </td>
                                                    <td class="ttd">
                                                        <span t-esc="l['neto']" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                                    </td>
                                                    <td class="ttd">
                                                        <span >GRA</span>
                                                    </td>
                                                </tr>
                                            </t>
                                        </tbody>
                                        <tfoot class="ttfoot">
                                            <tr>
                                                <td colspan="5"></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                            <t t-if="page_index + lines_per_page >= lines_count">
                                <table class="totals" style="width:100%">
                                    <tr>
                                        <td width="60%">
                                            <t t-if="o.narration" class="text-center" style="height:25px;">
                                                <strong>Observaciones:</strong><br/>
                                                <span class="text-center">
                                                    <br/><span t-field="o.narration"/>
                                                </span>
                                            </t>
                                        </td>
                                        <td class="text-right">
                                            <table class="table" style="page-break-inside: avoid;">
                                                <!--Tax totals-->
                                                <t t-set="tax_totals" t-value="o.tax_totals"/>
                                                <t t-call="cr_electronic_invoice_qweb_fe.document_tax_totals"/>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                                <strong>TOTAL EN LETRAS:</strong><span t-field="o.invoice_amount_text" />
                            </t>
                                </div>
                            </div>
                            <!-- Salto de página después de cada tabla, excepto la última -->
                            <t t-if="page_index + lines_per_page &lt; lines_count">
                                <p style="page-break-before:always;"> </p>
                            </t>
                            <!--div t-if="page_index + lines_per_page &lt; lines_count" class="page-break"/-->
                        </t>
                    </div>


                    <link href="http://fonts.googleapis.com/css?family=Droid+Sans" rel="stylesheet" type="text/css"/>
                    <style type="text/css">

                        body {
                            font-family: 'Droid Sans', Arial, sans-serif;
                            font-size:12px;
                        }

                        .cuadro-detalle {
                        border: 1px solid #3c7896;
                        border-radius: 10px 10px 0 0; /* Bordes redondeados solo arriba */
                        height:160mm;
                        width:100%;
                        font-family: sans-serif;
                        /*overflow: hidden; / * Importante para evitar que el contenido se desborde */
                        }

                        .contenido {
                        page-break-inside: avoid; /* Evita saltos de página dentro del div.contenido */
                        }

                        .totals {
                        page-break-inside: avoid; /* Evita saltos de página dentro del div.contenido */
                        }

                        .ttable {
                        width: 100%;
                        border-collapse: collapse;
                        }

                        .tth {
                        padding: 8px;
                        text-align:right;
                        }

                        .tthl {
                        padding: 8px;
                        text-align:left;
                        }

                        .ttd, .ttdl {
                        padding: 8px;
                        height: auto;  /* Permitir que las filas se ajusten al contenido */
                        text-align: right;
                        border-top: 1px solid lightgray; /* Línea horizontal entre filas */
                        page-break-inside: avoid; /* Evita saltos de página dentro de una fila */
                        }

                        .ttdl {
                        text-align: left;
                        }

                        .ttfoot {
                        border-top: 2px solid #144b9d; /* Línea azul en el pie de tabla */
                        border-bottom: none;
                        }

                        /* Estilos para controlar los saltos de página */
                        .ttable tbody tr {
                            page-break-inside: avoid;
                        }

                        @media print {
                            .page-break {
                                display: block;
                                page-break-before: always;
                            }
                        }

                        .encabezado {
                        background-color: #d9edf8;
                        color: #3c7896;
                        padding: 10px;
                        font-weight: bold;
                        border-radius: 10px 10px 0 0;
                        }
                    </style>
                </div>
            </t>
        </template>

        <!-- Procter & Gamble - Groupm Costa Rica -->
        <template id="report_invoice_document_fecr_plantilla_11" name="Procter / Groupm">
            <t t-call="cr_electronic_invoice_qweb_fe.external_layout_fecr_invoice">
                <div class="page" style="height:160mm;width:100%">
                    <t t-set="lines" t-value="o.group_lines_by_product()"/>
                    <t t-set="lines_count" t-value="len(lines)"/>
                    <t t-set="page_height" t-value="160"/> <!-- Altura máxima en mm para el contenido -->
                    <t t-set="line_height" t-value="11"/>  <!-- Altura estimada de cada línea en mm -->
                    <!--t t-set="lines_per_page" t-value="int(page_height / line_height)"/-->
                    <t t-set="lines_per_page" t-value="15"/>

                    <div class="content">
                        <t t-foreach="range(0, lines_count, lines_per_page)" t-as="page_index">
                            <t t-if="page_index > 0"><br/></t>
                            <div class="cuadro-detalle" style="height:160mm;">
                                <div class="encabezado">Detalle</div>
                                <div class="contenido">
                                    <table class="ttable">
                                        <thead>
                                            <tr>
                                                <th class="tthl">Descripción</th>
                                                <th class="tthl">Cantidad</th>
                                                <th class="tthl">Precio Unitario</th>
                                                <th width="15%" class="tth">Monto Bruto</th>
                                                <th width="15%" class="tth">Descuento</th>
                                                <th width="15%" class="tth">Monto Neto</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <t t-foreach="lines[page_index:page_index + lines_per_page]" t-as="l">
                                                <tr class="ttd">
                                                    <td class="ttdl">
                                                        <span t-esc="l['descripcion']"/>
                                                    </td>
                                                    <td class="ttdl">
                                                        <span t-esc="l['cantidad']"/>
                                                    </td>
                                                    <td class="ttd">
                                                        <span t-esc="l['precio_unitario']" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                                    </td>
                                                    <td class="ttd">
                                                        <span t-esc="l['bruto']" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                                    </td>
                                                    <td class="ttd" groups="product.group_discount_per_so_line">
                                                        <span t-esc="l['descuento']" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                                    </td>
                                                    <td class="ttd">
                                                        <span t-esc="l['neto']" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                                    </td>
                                                    <td class="ttd">
                                                        <span >GRA</span>
                                                    </td>
                                                </tr>
                                            </t>
                                        </tbody>
                                        <tfoot class="ttfoot">
                                            <tr>
                                                <td colspan="5"></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                            <t t-if="page_index + lines_per_page >= lines_count">
                                <table class="totals" style="width:100%">
                                    <tr>
                                        <td width="60%">
                                            <t t-if="o.narration" class="text-center" style="height:25px;">
                                                <strong>Observaciones:</strong><br/>
                                                <span class="text-center">
                                                    <br/><span t-field="o.narration"/>
                                                </span>
                                            </t>
                                        </td>
                                        <td class="text-right">
                                            <table class="table" style="page-break-inside: avoid;">
                                                <!--Tax totals-->
                                                <t t-set="tax_totals" t-value="o.tax_totals"/>
                                                <t t-call="cr_electronic_invoice_qweb_fe.document_tax_totals"/>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                                <strong>TOTAL EN LETRAS:</strong><span t-field="o.invoice_amount_text" />
                            </t>
                                </div>
                            </div>
                            <!-- Salto de página después de cada tabla, excepto la última -->
                            <t t-if="page_index + lines_per_page &lt; lines_count">
                                <p style="page-break-before:always;"> </p>
                            </t>
                            <!--div t-if="page_index + lines_per_page &lt; lines_count" class="page-break"/-->
                        </t>
                    </div>


                    <link href="http://fonts.googleapis.com/css?family=Droid+Sans" rel="stylesheet" type="text/css"/>
                    <style type="text/css">

                        body {
                            font-family: 'Droid Sans', Arial, sans-serif;
                            font-size:12px;
                        }

                        .cuadro-detalle {
                        border: 1px solid #3c7896;
                        border-radius: 10px 10px 0 0; /* Bordes redondeados solo arriba */
                        height:160mm;
                        width:100%;
                        font-family: sans-serif;
                        /*overflow: hidden; / * Importante para evitar que el contenido se desborde */
                        }

                        .contenido {
                        page-break-inside: avoid; /* Evita saltos de página dentro del div.contenido */
                        }

                        .totals {
                        page-break-inside: avoid; /* Evita saltos de página dentro del div.contenido */
                        }

                        .ttable {
                        width: 100%;
                        border-collapse: collapse;
                        }

                        .tth {
                        padding: 8px;
                        text-align:right;
                        }

                        .tthl {
                        padding: 8px;
                        text-align:left;
                        }

                        .ttd, .ttdl {
                        padding: 8px;
                        height: auto;  /* Permitir que las filas se ajusten al contenido */
                        text-align: right;
                        border-top: 1px solid lightgray; /* Línea horizontal entre filas */
                        page-break-inside: avoid; /* Evita saltos de página dentro de una fila */
                        }

                        .ttdl {
                        text-align: left;
                        }

                        .ttfoot {
                        border-top: 2px solid #144b9d; /* Línea azul en el pie de tabla */
                        border-bottom: none;
                        }

                        /* Estilos para controlar los saltos de página */
                        .ttable tbody tr {
                            page-break-inside: avoid;
                        }

                        @media print {
                            .page-break {
                                display: block;
                                page-break-before: always;
                            }
                        }

                        .encabezado {
                        background-color: #d9edf8;
                        color: #3c7896;
                        padding: 10px;
                        font-weight: bold;
                        border-radius: 10px 10px 0 0;
                        }
                    </style>
                </div>
            </t>
        </template>

        <!-- Tribunal - BCR -->
     <!--   <template id="external_layout_fecr_invoice_plantilla_6">
            <t t-if="not o" t-set="o" t-value="doc"/>
            <t t-if="not company">
                &lt;!&ndash; Multicompany &ndash;&gt;
                <t t-if="company_id">
                    <t t-set="company" t-value="company_id"/>
                </t>
                <t t-elif="o and 'company_id' in o and o.company_id.sudo()">
                    <t t-set="company" t-value="o.company_id.sudo()"/>
                </t>
                <t t-else="else">
                    <t t-set="company" t-value="res_company"/>
                </t>
            </t>
            <div t-attf-class="header o_company_#{company.id}_layout" t-att-style="report_header_style">
                <div class="row mb8">
                    <div class="col-3">
                        <img t-if="company.logo" t-att-src="image_data_uri(company.logo)" alt="Logo" style="width:100%;max-width:150px;"/>
                    </div>
                    <div class="col-5 text-center mb4" style="color:#144b9d">
                            <h4><strong><t t-esc="o.company_id.commercial_name"/></strong></h4>
                            Teléfono: <t t-esc="o.company_id.phone"/><br/>
                            <t t-if="o.company_id.street" t-esc="o.company_id.street"/>,
                            <t t-if="o.company_id.street2" t-esc="o.company_id.street2"/><br/>
                            <span>
                                Mata Redonda, San José
                                &lt;!&ndash;<t t-if="o.company_id.county_id" t-esc="o.company_id.county_id.name"/>,&ndash;&gt;
                                &lt;!&ndash;<t t-if="o.company_id.district_id" t-esc="o.company_id.district_id.name"/>&ndash;&gt;
                                &lt;!&ndash;t t-if="o.company_id.country_id" t-esc="o.company_id.country_id.name"/&ndash;&gt;
                            </span><br/>
                            Cédula Jurídica No <t t-esc="o.company_id.vat"/><br/>
                            Correo Electrónico:<t t-esc="o.company_id.email"/><br/>
                            &lt;!&ndash; <t t-if="o.company_id.website" t-esc="o.company_id.website"/> &ndash;&gt;
                    </div>
                    <div class="col-1"/>
                    <div class="col-3 text-left mb4">
                        &lt;!&ndash;div class="text-center"&ndash;&gt;
                        <div class="redbold">
                            <h4>
                            <t t-if="o.move_type == 'in_invoice'">
                                <span t-if="not o.number_electronic">FACTURA</span>
                                <span t-if="o.number_electronic and o.tipo_documento=='FE'">FACTURA ELECTRONICA</span>
                                <span t-if="o.number_electronic and o.tipo_documento=='FEC'">FACTURA ELECTRONICA COMPRA</span>
                                <span t-if="o.number_electronic and o.tipo_documento=='TE'">TIQUETE ELECTRONICO</span>
                            </t>
                            <t t-if="o.move_type == 'out_invoice'">
                                <span t-if="o.number_electronic and o.tipo_documento=='FE'">FACTURA ELECTRONICA</span>
                                <span t-if="o.number_electronic and o.tipo_documento=='TE'">TIQUETE ELECTRONICO</span>
                                <span t-if="o.number_electronic and o.tipo_documento=='FEE'">FACTURA ELECTRONICA DE EXPORTACION</span>
                                <span t-if="o.number_electronic and o.tipo_documento=='ND'">NOTA DEBITO ELECTRONICA</span>
                                <span t-if="not o.number_electronic">FACTURA</span>
                            </t>
                            <t t-if="o.move_type == 'out_refund' or o.move_type == 'in_refund'">
                                <span t-if="o.number_electronic">NOTA DE CRÉDITO ELECTRONICA</span>
                                <span t-if="not o.number_electronic">NOTA DE CRÉDITO</span>
                            </t>
                            </h4>
                            Nº
                            <span t-if="o.move_type == 'in_invoice' or o.move_type == 'in_refund'" t-esc="o.ref"/>
                            <span t-if="o.move_type == 'out_invoice' or o.move_type == 'out_refund'" t-esc="o.number_electronic and o.number_electronic[21:41] or o.name"/>
                            <br/>
                        </div>
                        <div>
                            Fecha emisión: <t t-esc="o.date_issuance or o.invoice_date or ''"/><br/>
                            Fecha vence:<span t-field="o.invoice_date_due"/>
                            Tipo pago: <t t-esc="o.invoice_payment_term_id and o.invoice_payment_term_id.name or 'CONTADO'"/><br/>
                            Medio pago: <t t-esc="o.payment_methods_id and o.payment_methods_id.name or 'Efectivo'"/>
                        </div>
                        <div t-if="report_type == 'pdf'" class="text-muted">
                            Página: <span class="page"/> / <span class="topage"/>
                        </div>
                    </div>
                </div>
                <div class="row mb8">
                    <div class="col-1">
                        <span t-if="o.move_type == 'in_invoice' or o.move_type == 'in_refund'">
                            <strong>Proveedor:</strong>
                        </span>
                        <span t-if="o.move_type == 'out_invoice' or o.move_type == 'out_refund'">
                            <strong>Cliente:</strong>
                            </span>
                        </div>
                    <div class="col-8">
                        <t t-if="o.partner_id.parent_id">
                            <span t-field="o.partner_id.parent_id.name"/><br/>
                        </t>
                        <span t-field="o.partner_id.name"/>
                    </div>
                    <div class="col-2">
                        <strong>Identificación:</strong>
                    </div>
                    <div class="col-1">
                        <span t-field="o.partner_id.vat"/>
                    </div>
                </div>
                &lt;!&ndash; Agencia &ndash;&gt;
                <div t-if="o.partner_shipping_id.agent == True and o.move_type == 'out_invoice' or o.move_type == 'out_refund'" class="row mb8">
                    <div class="col-1"><span><strong>Agencia:</strong></span></div>
                    <div class="col-8"><span t-field="o.partner_shipping_id.name"/></div>
                    <div class="col-1"></div>
                    <div class="col-2"></div>
                </div>
                &lt;!&ndash; Agencia / &ndash;&gt;
                <t t-if="company.watermark">
                    &lt;!&ndash;div class="row"
                        style="height:1000px; width:1500px;margin-left:10%;margin-top:30%;"&ndash;&gt;
                    <div class="row" style="margin-left:0%;margin-top:20%;">
                        <div class="col-6" name="watermark">
                            <span t-attf-style="-webkit-transform:rotate(-{{company.rotating_angle}}deg);font-size:{{company.font_size}}px;text-align:center;position:absolute;text-align:center;opacity:1;">
                                <t t-if="company.watermark_type == 'text'">
                                    <t t-esc="company.content_text"/>
                                </t>
                                <t t-if="company.watermark_type == 'image'">
                                    <img t-if="company.background_image" t-att-src="image_data_uri(company.background_image)"/>
                                </t>
                                <t t-if="company.watermark_type == 'logo'">
                                    <img t-if="company.logo" t-att-src="image_data_uri(company.logo)" style="position:absolute;height:200px; width:300px; opacity: 1;"/>
                                </t>
                            </span>
                        </div>
                    </div>
                </t>

                <link href="http://fonts.googleapis.com/css?family=Droid+Sans" rel="stylesheet" type="text/css"/>
                <style type="text/css">
                    body {
                        font-family: 'Droid Sans', Arial, sans-serif;
                        font-size:12px;

                    }
                    .redbold{
                        color:#ec2028;
                        font-weight:bolder;
                        font-size:13px;
                        border:none;
                        padding:5px 5px;
                    }
                </style>
            </div>
            <div t-attf-class="article o_report_layout_standard o_company_#{company.id}_layout {{  'o_layout_background' if company.layout_background in ['Geometric', 'Custom']  else  '' }}" t-attf-style="background-image: url({{ 'data:image/png;base64,%s' % company.layout_background_image.decode('utf-8') if company.layout_background_image and company.layout_background == 'Custom' else '/base/static/img/bg_background_template.jpg' if company.layout_background == 'Geometric' else ''}});" t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id" t-att-data-oe-lang="o and o.env.context.get('lang')">
                <div class="pt-5">
                    &lt;!&ndash; This div ensures that the address is not cropped by the header. &ndash;&gt;
                    <t t-call="web.address_layout"/>
                </div>
                <t t-out="0"/>
            </div>
            <div t-attf-class="footer o_standard_footer o_company_#{company.id}_layout">

                <t t-if="o.move_type in ('out_invoice', 'out_refund')">
                    <div class="cuadro-bancos">
                        <div class="encabezado-bancos">CUALQUIER RECLAMO REFERENTE A ESTA
                        <t t-if="o.move_type == 'out_invoice'">FACTURA</t>
                        <t t-if="o.move_type == 'out_refund'">NOTA DE CRÉDITO</t>
                        DEBE HACERSE EN LOS SIGUIENTES 5 DIAS HABILES DE LA FECHA DE RECIBIDA.</div>
                        &lt;!&ndash;p style="font-size:14px;padding:2px;text-align:justify;">
                            Este documento constituye factura comercial con titulo ejecutivo de acuerdo al art. 460 del Código de Comercio
                            que podrá hacerse efectivo el día de su vencimiento y en caso de ejecución, renuncio a mi domicilio y los
                            trámites de juicio ejecutivo. Esta factura devengará 3% mensual después de su vencimiento.
                        </p&ndash;&gt;
                        <t t-if="o.move_type =='out_invoice' and (o.company_id.html_bank_account1 or o.company_id.html_bank_account2)">
                            <strong>Cuentas bancarias para transferencias o depósitos:</strong>
                            <table width="100%;" cellpadding="0" cellspacing="0">
                                <tr>
                                    <td width="50%"> <t t-raw="o.company_id.html_bank_account1"/>
                                        &lt;!&ndash;p style="font-size:16px;">
                                            <strong>XXXXXX</strong><br/>
                                            Cuenta: XXXXX<br/>
                                            CC: XXXXXX<br/>
                                            IBAN: XXXXX
                                        </p&ndash;&gt;
                                    </td>
                                    <td> <t t-raw="o.company_id.html_bank_account2"/>
                                        &lt;!&ndash;p style="font-size:16px;">
                                            <strong>XXXXX</strong><br/>
                                            Cuenta: XXXXX<br/>
                                            CC: XXXXX<br/>
                                            IBAN: XXXXX
                                        </p&ndash;&gt;
                                    </td>
                                </tr>
                            </table>
                            <strong>CONFIRMACIONES:</strong> Para enviar confirmaciones de depósito    Correo:   <span t-field="o.company_id.email"/>
                        </t>
                        <t t-if="o.move_type != 'out_invoice'">
                            <div class="rounded2">
                                <table width="100%;" cellpadding="0" cellspacing="0">
                                    <tr class="text-center">
                                        <td width="34%"><br/><br/><br/>__________________________</td>
                                        <td width="33%"><br/><br/><br/>__________________________</td>
                                        <td width="33%"><br/><br/><br/>__________________________</td>
                                    </tr>
                                    <tr class="text-center">
                                        <td>Registrado por</td>
                                        <td>Fecha</td>
                                        <td>Revisado por</td>
                                    </tr>
                                </table>
                            </div>
                            <br/>
                        </t>
                            Certificado de dispensa del uso del timbre Ley No. 5527 autorizado por el Colegio de Periodistas de Costa Rica No. CDCE07-005-03<br/>
    AUTORIZADO MEDIANTE OFICIO No DGTR-033-2019 DEL 20/06/2019<br/>
    CN: <span t-field="o.number_electronic"/>
                        <div class="pie-bancos">
                            <t t-if="o.move_type == 'out_invoice'">Esta factura posterior a su fecha de vencimiento devengara un 2% mensual de interés moratorio.</t>
                        </div>
                    </div>
                </t>
                <style type="text/css">
                    .cuadro-bancos {
                    border: 1px solid #3e783f;
                    border-radius: 10px 10px 10px 10px; /* Bordes redondeados */
                    width:100%;
                    font-family: sans-serif;
                    }

                    .encabezado-bancos {
                    background-color: #dff0d8;
                    color: #3e783f;
                    padding: 10px;
                    /*font-weight: bold;*/
                    border-radius: 10px 10px 0 0;
                    }
                    .pie-bancos {
                    background-color: #dff0d8;
                    color: #3e783f;
                    padding: 10px;
                    /*font-weight: bold;*/
                    border-radius: 0 0 10px 10px;
                    }

                </style>
            </div>
        </template>
        <template id="report_invoice_document_fecr_plantilla_6" name="Tribunal Supremo / Banco de Costa Rica">
            <t t-call="tvcr_changes.external_layout_fecr_invoice_tribunal_bcr">
                <div class="page" style="height:160mm;width:100%">
                    <t t-set="lines" t-value="o.invoice_line_ids"/>
                    <t t-set="lines_count" t-value="len(lines)"/>
                    <t t-set="page_height" t-value="160"/> &lt;!&ndash; Altura máxima en mm para el contenido &ndash;&gt;
                    <t t-set="line_height" t-value="11"/>  &lt;!&ndash; Altura estimada de cada línea en mm &ndash;&gt;
                    &lt;!&ndash;t t-set="lines_per_page" t-value="int(page_height / line_height)"/&ndash;&gt;
                    <t t-set="lines_per_page" t-value="15"/>

                    <div class="content">
                        <t t-foreach="range(0, lines_count, lines_per_page)" t-as="page_index">
                            <t t-if="page_index > 0"><br/></t>
                            <div class="cuadro-detalle" style="height:160mm;">
                                <div class="encabezado">Detalle</div>
                                <div class="contenido">
                                    <table class="ttable">
                                        <thead>
                                            <tr>
                                                <th class="tthl">Descripción</th>
                                                <th width="15%" class="tth">Monto Bruto</th>
                                                <th width="15%" class="tth">Descuento</th>
                                                <th width="10%" class="tth">Impuestos</th>
                                                <th width="15%" class="tth">Monto Neto</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <t t-foreach="lines[page_index:page_index + lines_per_page]" t-as="l">
                                                <tr class="ttd">
                                                    <td class="ttdl">
                                                        <span t-field="l.product_id.name"/>
                                                    </td>
                                                    <td class="ttd">
                                                        <span t-field="l.price_unit" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                                    </td>
                                                    <td class="ttd" groups="product.group_discount_per_so_line">
                                                        <span t-esc="l.price_unit * l.discount / 100" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                                    </td>
                                                    <td class="ttd">
                                                        <span t-if="l.tax_ids" t-esc="', '.join(map(lambda x: (x.description or x.name), l.tax_ids))"/>
                                                        <span t-if="not l.tax_ids">EXE</span>
                                                    </td>
                                                    <td class="ttd">
                                                        <span t-field="l.price_subtotal" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                                    </td>
                                                </tr>
                                            </t>
                                        </tbody>
                                        <tfoot class="ttfoot">
                                            <tr>
                                                <td colspan="5"></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                            <t t-if="page_index + lines_per_page >= lines_count">
                                <table class="totals" style="width:100%">
                                    <tr>
                                        <td width="60%">
                                            <t t-if="o.narration" class="text-center" style="height:25px;">
                                                <strong>Observaciones:</strong><br/>
                                                <span class="text-center">
                                                    <br/><span t-field="o.narration"/>
                                                </span>
                                            </t>
                                        </td>
                                        <td class="text-right">
                                            <table class="table" style="page-break-inside: avoid;">
                                                &lt;!&ndash;Tax totals&ndash;&gt;
                                                <t t-set="tax_totals" t-value="o.tax_totals"/>
                                                <t t-call="cr_electronic_invoice_qweb_fe.document_tax_totals"/>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                                <strong>TOTAL EN LETRAS:</strong><span t-field="o.invoice_amount_text" />
                            </t>
                                </div>
                            </div>
                            &lt;!&ndash; Salto de página después de cada tabla, excepto la última &ndash;&gt;
                            <t t-if="page_index + lines_per_page &lt; lines_count">
                                <p style="page-break-before:always;"> </p>
                            </t>
                            &lt;!&ndash;div t-if="page_index + lines_per_page &lt; lines_count" class="page-break"/&ndash;&gt;
                        </t>
                    </div>


                    <link href="http://fonts.googleapis.com/css?family=Droid+Sans" rel="stylesheet" type="text/css"/>
                    <style type="text/css">

                        body {
                            font-family: 'Droid Sans', Arial, sans-serif;
                            font-size:12px;
                        }

                        .cuadro-detalle {
                        border: 1px solid #3c7896;
                        border-radius: 10px 10px 0 0; /* Bordes redondeados solo arriba */
                        height:160mm;
                        width:100%;
                        font-family: sans-serif;
                        /*overflow: hidden; / * Importante para evitar que el contenido se desborde */
                        }

                        .contenido {
                        page-break-inside: avoid; /* Evita saltos de página dentro del div.contenido */
                        }

                        .totals {
                        page-break-inside: avoid; /* Evita saltos de página dentro del div.contenido */
                        }

                        .ttable {
                        width: 100%;
                        border-collapse: collapse;
                        }

                        .tth {
                        padding: 8px;
                        text-align:right;
                        }

                        .tthl {
                        padding: 8px;
                        text-align:left;
                        }

                        .ttd, .ttdl {
                        padding: 8px;
                        height: auto;  /* Permitir que las filas se ajusten al contenido */
                        text-align: right;
                        border-top: 1px solid lightgray; /* Línea horizontal entre filas */
                        page-break-inside: avoid; /* Evita saltos de página dentro de una fila */
                        }

                        .ttdl {
                        text-align: left;
                        }

                        .ttfoot {
                        border-top: 2px solid #144b9d; /* Línea azul en el pie de tabla */
                        border-bottom: none;
                        }

                        /* Estilos para controlar los saltos de página */
                        .ttable tbody tr {
                            page-break-inside: avoid;
                        }

                        @media print {
                            .page-break {
                                display: block;
                                page-break-before: always;
                            }
                        }

                        .encabezado {
                        background-color: #d9edf8;
                        color: #3c7896;
                        padding: 10px;
                        font-weight: bold;
                        border-radius: 10px 10px 0 0;
                        }
                    </style>
                </div>
            </t>
        </template>-->

        <!-- Consejo de seguridad vial -->
        <template id="report_invoice_document_fecr_plantilla_4" name="Consejo de Seguridad Vial">
            <t t-call="cr_electronic_invoice_qweb_fe.external_layout_fecr_invoice">
                <div class="page" style="height:160mm;width:100%">
                    <t t-set="lines" t-value="o.group_lines_by_product()"/>
                    <t t-set="lines_count" t-value="len(lines)"/>
                    <t t-set="page_height" t-value="160"/> <!-- Altura máxima en mm para el contenido -->
                    <t t-set="line_height" t-value="11"/>  <!-- Altura estimada de cada línea en mm -->
                    <!--t t-set="lines_per_page" t-value="int(page_height / line_height)"/-->
                    <t t-set="lines_per_page" t-value="15"/>

                    <div class="content">
                        <t t-foreach="range(0, lines_count, lines_per_page)" t-as="page_index">
                            <t t-if="page_index > 0"><br/></t>
                            <div class="cuadro-detalle" style="height:160mm;">
                                <div class="encabezado">Detalle</div>
                                <div class="contenido">
                                    <table class="ttable">
                                        <thead>
                                            <tr>
                                                <th class="tthl">Descripción</th>
                                                <th class="tthl">Cantidad</th>
                                                <th width="15%" class="tth">Monto Bruto</th>
                                                <th width="15%" class="tth">Descuento</th>
                                                <th width="15%" class="tth">Monto Neto</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <t t-foreach="lines[page_index:page_index + lines_per_page]" t-as="l">
                                                <tr class="ttd">
                                                    <td class="ttdl">
                                                        <span t-esc="l['descripcion']"/>
                                                    </td>
                                                    <td class="ttdl">
                                                        <span t-esc="l['cantidad']"/>
                                                    </td>
                                                    <td class="ttd">
                                                        <span t-esc="l['bruto']" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                                    </td>
                                                    <td class="ttd" groups="product.group_discount_per_so_line">
                                                        <span t-esc="l['descuento']" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                                    </td>
                                                    <td class="ttd">
                                                        <span t-esc="l['neto']" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                                    </td>
<!--                                                    <td class="ttd">-->
<!--                                                        <span >GRA</span>-->
<!--                                                    </td>-->
                                                </tr>
                                            </t>
                                        </tbody>
                                        <tfoot class="ttfoot">
                                            <tr>
                                                <td colspan="5"></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                            <t t-if="page_index + lines_per_page >= lines_count">
                                <table class="totals" style="width:100%">
                                    <tr>
                                        <td width="60%">
                                            <t t-if="o.narration" class="text-center" style="height:25px;">
                                                <strong>Observaciones:</strong><br/>
                                                <span class="text-center">
                                                    <br/><span t-field="o.narration"/>
                                                </span>
                                            </t>
                                        </td>
                                        <td class="text-right">
                                            <table class="table" style="page-break-inside: avoid;">
                                                <!--Tax totals-->
                                                <t t-set="tax_totals" t-value="o.tax_totals"/>
                                                <t t-call="cr_electronic_invoice_qweb_fe.document_tax_totals"/>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                                <strong>TOTAL EN LETRAS:</strong><span t-field="o.invoice_amount_text" />
                            </t>
                                </div>
                            </div>
                            <!-- Salto de página después de cada tabla, excepto la última -->
                            <t t-if="page_index + lines_per_page &lt; lines_count">
                                <p style="page-break-before:always;"> </p>
                            </t>
                            <!--div t-if="page_index + lines_per_page &lt; lines_count" class="page-break"/-->
                        </t>
                    </div>


                    <link href="http://fonts.googleapis.com/css?family=Droid+Sans" rel="stylesheet" type="text/css"/>
                    <style type="text/css">

                        body {
                            font-family: 'Droid Sans', Arial, sans-serif;
                            font-size:12px;
                        }

                        .cuadro-detalle {
                        border: 1px solid #3c7896;
                        border-radius: 10px 10px 0 0; /* Bordes redondeados solo arriba */
                        height:160mm;
                        width:100%;
                        font-family: sans-serif;
                        /*overflow: hidden; / * Importante para evitar que el contenido se desborde */
                        }

                        .contenido {
                        page-break-inside: avoid; /* Evita saltos de página dentro del div.contenido */
                        }

                        .totals {
                        page-break-inside: avoid; /* Evita saltos de página dentro del div.contenido */
                        }

                        .ttable {
                        width: 100%;
                        border-collapse: collapse;
                        }

                        .tth {
                        padding: 8px;
                        text-align:right;
                        }

                        .tthl {
                        padding: 8px;
                        text-align:left;
                        }

                        .ttd, .ttdl {
                        padding: 8px;
                        height: auto;  /* Permitir que las filas se ajusten al contenido */
                        text-align: right;
                        border-top: 1px solid lightgray; /* Línea horizontal entre filas */
                        page-break-inside: avoid; /* Evita saltos de página dentro de una fila */
                        }

                        .ttdl {
                        text-align: left;
                        }

                        .ttfoot {
                        border-top: 2px solid #144b9d; /* Línea azul en el pie de tabla */
                        border-bottom: none;
                        }

                        /* Estilos para controlar los saltos de página */
                        .ttable tbody tr {
                            page-break-inside: avoid;
                        }

                        @media print {
                            .page-break {
                                display: block;
                                page-break-before: always;
                            }
                        }

                        .encabezado {
                        background-color: #d9edf8;
                        color: #3c7896;
                        padding: 10px;
                        font-weight: bold;
                        border-radius: 10px 10px 0 0;
                        }
                    </style>
                </div>
            </t>
        </template>

        <!-- Grupo Mutual Alajuela-la Vivienda de Ahorro y Prestamos / Mutual Cartago de Ahorro y Préstamo / Instituto Nacional de Arendizaje-->
        <template id="report_invoice_document_fecr_plantilla_7" name="Mutual Alajuela / Mutual Cartago / INA">
            <t t-call="cr_electronic_invoice_qweb_fe.external_layout_fecr_invoice">
                <div class="page" style="height:160mm;width:100%">
                    <t t-set="lines" t-value="o.group_lines_by_product_distribution_model()"/>
                    <t t-set="lines_count" t-value="len(lines)"/>
                    <t t-set="page_height" t-value="160"/> <!-- Altura máxima en mm para el contenido -->
                    <t t-set="line_height" t-value="11"/>  <!-- Altura estimada de cada línea en mm -->
                    <!--t t-set="lines_per_page" t-value="int(page_height / line_height)"/-->
                    <t t-set="lines_per_page" t-value="15"/>

                    <div class="content">
                        <t t-foreach="range(0, lines_count, lines_per_page)" t-as="page_index">
                            <t t-if="page_index > 0"><br/></t>
                            <div class="cuadro-detalle" style="height:160mm;">
                                <div class="encabezado">Detalle</div>
                                <div class="contenido">
                                    <table class="ttable">
                                        <thead>
                                            <tr>
                                                <th class="tthl">Descripción</th>
                                                <th width="15%" class="tth">Monto Bruto</th>
                                                <th width="15%" class="tth">Descuento</th>
                                                <th width="15%" class="tth">Monto Neto</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <t t-foreach="lines[page_index:page_index + lines_per_page]" t-as="l">
                                                <tr class="ttd">
                                                    <td class="ttdl">
                                                        <span t-esc="l['descripcion']"/>
                                                    </td>
                                                    <td class="ttd">
                                                        <span t-esc="l['bruto']" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                                    </td>
                                                    <td class="ttd" groups="product.group_discount_per_so_line">
                                                        <span t-esc="l['descuento']" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                                    </td>
                                                    <td class="ttd">
                                                        <span t-esc="l['neto']" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                                    </td>
                                                    <td class="ttd">
                                                        <span>EX-CP</span>
                                                    </td>
                                                </tr>
                                            </t>
                                        </tbody>
                                        <tfoot class="ttfoot">
                                            <tr>
                                                <td colspan="5"></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                            <t t-if="page_index + lines_per_page >= lines_count">
                                <table class="totals" style="width:100%">
                                    <tr>
                                        <td width="60%">
                                            <t t-if="o.narration" class="text-center" style="height:25px;">
                                                <strong>Observaciones:</strong><br/>
                                                <span class="text-center">
                                                    <br/><span t-field="o.narration"/>
                                                </span>
                                            </t>
                                        </td>
                                        <td class="text-right">
                                            <table class="table" style="page-break-inside: avoid;">
                                                <!--Tax totals-->
                                                <t t-set="tax_totals" t-value="o.tax_totals"/>
                                                <t t-call="cr_electronic_invoice_qweb_fe.document_tax_totals"/>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                                <strong>TOTAL EN LETRAS:</strong><span t-field="o.invoice_amount_text" />
                            </t>
                                </div>
                            </div>
                            <!-- Salto de página después de cada tabla, excepto la última -->
                            <t t-if="page_index + lines_per_page &lt; lines_count">
                                <p style="page-break-before:always;"> </p>
                            </t>
                            <!--div t-if="page_index + lines_per_page &lt; lines_count" class="page-break"/-->
                        </t>
                    </div>


                    <link href="http://fonts.googleapis.com/css?family=Droid+Sans" rel="stylesheet" type="text/css"/>
                    <style type="text/css">

                        body {
                            font-family: 'Droid Sans', Arial, sans-serif;
                            font-size:12px;
                        }

                        .cuadro-detalle {
                        border: 1px solid #3c7896;
                        border-radius: 10px 10px 0 0; /* Bordes redondeados solo arriba */
                        height:160mm;
                        width:100%;
                        font-family: sans-serif;
                        /*overflow: hidden; / * Importante para evitar que el contenido se desborde */
                        }

                        .contenido {
                        page-break-inside: avoid; /* Evita saltos de página dentro del div.contenido */
                        }

                        .totals {
                        page-break-inside: avoid; /* Evita saltos de página dentro del div.contenido */
                        }

                        .ttable {
                        width: 100%;
                        border-collapse: collapse;
                        }

                        .tth {
                        padding: 8px;
                        text-align:right;
                        }

                        .tthl {
                        padding: 8px;
                        text-align:left;
                        }

                        .ttd, .ttdl {
                        padding: 8px;
                        height: auto;  /* Permitir que las filas se ajusten al contenido */
                        text-align: right;
                        border-top: 1px solid lightgray; /* Línea horizontal entre filas */
                        page-break-inside: avoid; /* Evita saltos de página dentro de una fila */
                        }

                        .ttdl {
                        text-align: left;
                        }

                        .ttfoot {
                        border-top: 2px solid #144b9d; /* Línea azul en el pie de tabla */
                        border-bottom: none;
                        }

                        /* Estilos para controlar los saltos de página */
                        .ttable tbody tr {
                            page-break-inside: avoid;
                        }

                        @media print {
                            .page-break {
                                display: block;
                                page-break-before: always;
                            }
                        }

                        .encabezado {
                        background-color: #d9edf8;
                        color: #3c7896;
                        padding: 10px;
                        font-weight: bold;
                        border-radius: 10px 10px 0 0;
                        }
                    </style>
                </div>
            </t>
        </template>

        <!-- Reports -->
        <template id="account.report_invoice">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-set="lang" t-value="o.partner_id.lang"/>
                    <t t-if="o._get_name_invoice_report() == 'account.report_invoice_document'" t-call="account.report_invoice_document" t-lang="lang"/>
                    <t t-if="o._get_name_invoice_report() == 'cr_electronic_invoice_qweb_fe.report_invoice_document_fecr'" t-call="cr_electronic_invoice_qweb_fe.report_invoice_document_fecr" t-lang="lang"/>
                    <t t-if="o._get_name_invoice_report() == 'tvcr_changes.report_invoice_document_fecr_plantilla_3'" t-call="tvcr_changes.report_invoice_document_fecr_plantilla_3" t-lang="lang"/>
                    <t t-if="o._get_name_invoice_report() == 'tvcr_changes.report_invoice_document_fecr_plantilla_4'" t-call="tvcr_changes.report_invoice_document_fecr_plantilla_4" t-lang="lang"/>
<!--                    <t t-if="o._get_name_invoice_report() == 'tvcr_changes.report_invoice_document_fecr_plantilla_6'" t-call="tvcr_changes.report_invoice_document_fecr_plantilla_6" t-lang="lang"/>-->
                    <t t-if="o._get_name_invoice_report() == 'tvcr_changes.report_invoice_document_fecr_plantilla_7'" t-call="tvcr_changes.report_invoice_document_fecr_plantilla_7" t-lang="lang"/>
                    <t t-if="o._get_name_invoice_report() == 'tvcr_changes.report_invoice_document_fecr_plantilla_11'" t-call="tvcr_changes.report_invoice_document_fecr_plantilla_11" t-lang="lang"/>
                </t>
            </t>
        </template>

        <template id="account.report_invoice_with_payments">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-set="lang" t-value="o.partner_id.lang"/>
                    <t t-set="print_with_payments" t-value="True"/>
                    <t t-if="o._get_name_invoice_report() == 'account.report_invoice_document'" t-call="account.report_invoice_document" t-lang="lang"/>
                    <t t-if="o._get_name_invoice_report() == 'cr_electronic_invoice_qweb_fe.report_invoice_document_fecr'" t-call="cr_electronic_invoice_qweb_fe.report_invoice_document_fecr" t-lang="lang"/>
                    <t t-if="o._get_name_invoice_report() == 'tvcr_changes.report_invoice_document_fecr_plantilla_3'" t-call="tvcr_changes.report_invoice_document_fecr_plantilla_3" t-lang="lang"/>
                    <t t-if="o._get_name_invoice_report() == 'tvcr_changes.report_invoice_document_fecr_plantilla_4'" t-call="tvcr_changes.report_invoice_document_fecr_plantilla_4" t-lang="lang"/>
<!--                    <t t-if="o._get_name_invoice_report() == 'tvcr_changes.report_invoice_document_fecr_plantilla_6'" t-call="tvcr_changes.report_invoice_document_fecr_plantilla_6" t-lang="lang"/>-->
                    <t t-if="o._get_name_invoice_report() == 'tvcr_changes.report_invoice_document_fecr_plantilla_7'" t-call="tvcr_changes.report_invoice_document_fecr_plantilla_7" t-lang="lang"/>
                    <t t-if="o._get_name_invoice_report() == 'tvcr_changes.report_invoice_document_fecr_plantilla_11'" t-call="tvcr_changes.report_invoice_document_fecr_plantilla_11" t-lang="lang"/>
                </t>
            </t>
        </template>

    </data>

</odoo>
